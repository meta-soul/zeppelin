<div class="revisions-comarator">
  <div>
    <h2 style="font-weight: bold;color:rgba(0, 0, 0, 0.65)">版本对比</h2>
  </div>
  <nz-divider></nz-divider>
  <div class="revision-wrap">
    <div class="table-wrap" [class.hid]="expand">
      <nz-table 
        [nzData]="noteRevisions"
        [nzShowPagination]="false"
        [nzScroll]="{y: '600px' }">
        <thead>
          <tr>
            <th nzLeft>版本名</th>
            <th nzWidth="200px">提交时间</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let revision of noteRevisions">
            <td>{{revision.message}}</td>
            <td>{{formatRevisionDate(revision.time)}}</td>
            <td>
              <button 
                nz-button 
                nzType="primary" 
                nzSize="small"
                (click)="getApproval(revision.id)"
                style="font-size: 12px;"
                >申请上线
              </button>
            </td>
          </tr>
        </tbody>
      </nz-table>
    </div>
    <div class="diff-wrap" [class.collapsed]="!expand" [class.expanded]="expand">
      <div class="option">
        <div (click)="handleExpand()" class="icon-fold">
          <span *ngIf="!expand" nzTooltipTitle="展开" nzTooltipPlacement="top" nz-tooltip nz-icon nzType="menu-fold" nzTheme="outline"></span>
          <span *ngIf="expand" nzTooltipTitle="恢复" nzTooltipPlacement="top" nz-tooltip nz-icon nzType="menu-unfold" nzTheme="outline"></span>
        </div>
        <div class="select-wrap">
          <nz-select [(ngModel)]="preRevisionOption" (ngModelChange)="onOptionChange(preRevisionOption,'pre')" [nzPlaceHolder]="'选择版本'" class="custom-select">
            <nz-option *ngFor="let option of noteRevisions" [nzValue]="option.id" [nzLabel]="option.message">{{option}}</nz-option>
          </nz-select> -->
          <nz-select [(ngModel)]="curRevisionOption" (ngModelChange)="onOptionChange(curRevisionOption,'cur')" [nzPlaceHolder]="'选择版本'" class="custom-select">
            <nz-option *ngFor="let option of noteRevisions" [nzValue]="option.id" [nzLabel]="option.message">{{option}}</nz-option>
          </nz-select>
        </div>
      </div>
      <zeppelin-revision-diff 
        [diffValue]="diffValue" 
        [language]="'sql'"
        style="flex:1">
      </zeppelin-revision-diff>
    </div>
  </div>
</div>
