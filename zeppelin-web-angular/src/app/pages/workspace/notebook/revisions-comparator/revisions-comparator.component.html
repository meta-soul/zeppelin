<div class="revisions-comarator">
  <div>
    <h2>Revisions comparator</h2>
  </div>
  <nz-divider></nz-divider>
  <div class="revision-wrap">
    <div class="table-wrap">
      <nz-table #basicTable 
        [nzData]="noteRevisions"
        [nzShowPagination]="false">
        <thead>
          <tr>
            <th nzLeft>Revision name</th>
            <th [nzWidth]="150">Date</th>
            <th nzRight [nzWidth]="100">操作</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let revision of noteRevisions" (click)="onRowClick(item)">
            <td>{{revision.message}}</td>
            <td>{{formatRevisionDate(revision.time)}}</td>
            <td>
              <button (click)="getRevisionCompare(revision)">提交审批</button>
            </td>
          </tr>
        </tbody>
      </nz-table>
    </div>
    <div class="diff-wrap">
      <p class="text-diff">
        <nz-select [(ngModel)]="preRevisionOption" (change)="onOptionChange(preRevisionOption,'pre')" [nzPlaceHolder]="'pre revision'" [nzSize]="small" class="self-select">
          <nz-option *ngFor="let option of noteRevisions" [nzValue]="option.id" [nzLabel]="option.message">{{option}}</nz-option>
        </nz-select> -->
        <nz-select [(ngModel)]="curRevisionOption" (change)="onOptionChange(curRevisionOption,'cur')" [nzPlaceHolder]="'cur revision'" [nzSize]="small" class="self-select">
          <nz-option *ngFor="let option of noteRevisions" [nzValue]="option.id" [nzLabel]="option.message">{{option}}</nz-option>
        </nz-select>
      <zeppelin-revision-diff 
        [diffValue]="diffValue" 
        [language]="'sql'"
        [opts]="opts"
        style="flex:1">
      </zeppelin-revision-diff>
    </div>
  </div>
</div>
